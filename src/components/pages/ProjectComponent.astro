---
import SectionContainer from '@/components/SectionContainer.astro';
import TechnologyBadget from '@/components/TechnologyBadget.astro';
import { TAGS } from '@/constants';
import GitHubIcon from '@/icons/GitHubIcon.astro';
import WorldWWWIcon from '@/icons/WorldWWWIcon.astro';
import Layout from '@/layouts/Layout.astro';
import { getProjectById } from '@/services/projects';
import type { TagName } from '@/types';

const { id } = Astro.params;

const project = await getProjectById(id!);
---

<Layout title={`Project ${id}`} description='...'>
  <SectionContainer class='p-3' id='project-content'>
    <h1 class='text-center text-2xl md:text-3xl lg:text-4xl mb-6 md:mb-10'>
      {project?.title}
    </h1>
    <ul class='my-6 flex flex-row flex-wrap gap-2 lg:gap-3'>
      {
        project?.tags.map((tag: TagName) => {
          const { class: className, name, icon: Icon } = TAGS[tag];
          return (
            <TechnologyBadget class={`${className} text-xs`}>
              <Icon class={`size-5 md:size-6`} /> {name}
            </TechnologyBadget>
          );
        })
      }
    </ul>

    <div class='flex flex-col gap-8 md:flex-row mb-8'>
      <p class='text-sm md:text-base text-pretty'>
        {project?.description}
      </p>
      <div class='grid grid-cols-2 gap-2 md:max-w-[500px]'>
        <div>
          <img
            data-img
            data-img-url='https://flowbite.s3.amazonaws.com/docs/gallery/square/image-1.jpg'
            class='h-auto max-w-full rounded-lg'
            src='https://flowbite.s3.amazonaws.com/docs/gallery/square/image-1.jpg'
            alt=''
          />
        </div>
        <div>
          <img
            data-img
            data-img-url='https://flowbite.s3.amazonaws.com/docs/gallery/square/image-2.jpg'
            class='h-auto max-w-full rounded-lg'
            src='https://flowbite.s3.amazonaws.com/docs/gallery/square/image-2.jpg'
            alt=''
          />
        </div>
        <div>
          <img
            data-img
            data-img-url='https://flowbite.s3.amazonaws.com/docs/gallery/square/image-3.jpg'
            class='h-auto max-w-full rounded-lg'
            src='https://flowbite.s3.amazonaws.com/docs/gallery/square/image-3.jpg'
            alt=''
          />
        </div>
        <div>
          <img
            data-img
            data-img-url='https://flowbite.s3.amazonaws.com/docs/gallery/square/image-4.jpg'
            class='h-auto max-w-full rounded-lg'
            src='https://flowbite.s3.amazonaws.com/docs/gallery/square/image-4.jpg'
            alt=''
          />
        </div>
      </div>
    </div>

    <div class='flex flex-col gap-4'>
      {
        project?.link && (
          <a
            href={project?.link}
            target='_blank'
            referrerpolicy='no-referrer'
            rel='noopener noreferrer'
            class='w-fit inline-flex flex-row align-middle gap-4 text-deep-purple transition-colors hover:text-lavender text-sm md:text-base'
          >
            <WorldWWWIcon class='size-6' /> Visit page
          </a>
        )
      }
      <a
        href={project?.github}
        target='_blank'
        referrerpolicy='no-referrer'
        rel='noopener noreferrer'
        class='w-fit inline-flex flex-row align-middle gap-4 text-deep-purple transition-colors hover:text-lavender text-sm md:text-base'
      >
        <GitHubIcon class='size-6' /> View code
      </a>
    </div>
  </SectionContainer>
</Layout>
